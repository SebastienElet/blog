<!--VarStream
title=Conventions de nommage des bases de données
description=Depuis que j'ai découvert les bases de données avec MySQL, je n'ai pas cessé de m'en servir, tant et si bien que j'ai fini par définir une convention de nommage.
shortTitle=Convention de nommage SQL
shortDesc=En savoir plus sur la convention de nommage que j'utilise
published=2012-07-18T14:34:39.000Z
lang=fr
location=FR
keywords.+=JavaScript
categories.+=.*
-->

<h2>Depuis que j'ai découvert les bases de données avec MySQL, je n'ai pas cessé de m'en servir, tant et si bien que j'ai fini par définir une convention de nommage.</h2>
<p>Depuis que j'ai découvert les bases de données avec MySQL, je n'ai pas cessé de m'en
  servir, tant et si bien que j'ai fini par définir une convention de nommage.</p>

<p>Je suis actuellement en pleine lecture du livre Bases de données : <cite>Concepts, utilisation et développement de Jean-Luc Hainaut</cite>.
  J'en ferai la critique sur ce même blog, pour l'instant mon impression est plutôt
  bonne.</p>
<p>En revanche, il y a une chose qui m'exaspère au plus haut point dans ce livre : le
  manque d'uniformité et de clarté dans les appellations des bases et des champs.
  Tout est en majuscule (argh !), en français (ouch !) et les clés primaires auto
  incrémentées sont nommées comme suit : NCOM, NCLI, NPRO. Ce n'est pas vraiment
  l'idéal.</p>
<p>Au fil de mon utilisation des bases de données, j'ai normalisé ma façon de les nommer
  de manière à ce que l'on puisse facilement comprendre les requêtes que je rédige.
  Je vous livre donc ma méthode afin que les plus fainéants d'entre vous n'aient
  pas à y réflechir, mais simplement à l'appliquer.</p>
<h3>Règles de base</h3>
<p>English everywhere. Quel est le sens de nommer ses bases, tables ou champs en français
  alors que :</p>
<ul>
  <li>la langue des programmeurs est l'anglais;</li>
  <li> rien ne dit qu'un projet ne s'internationalisera pas durant son cycle de vie ou
    que l'entreprise ne devienne pas une multinationale entre temps;</li>
  <li>l'anglais est simple, n'a pas d'accents donc pas de source d'erreurs du genre :
    comment savoir si la table <code>colles</code> fait référence aux collés du collège
    du coin ou aux tubes de colle en réserve ?</li>
  <li>Le langage <code><abbr>itle=Structured Query Language]SQL</abbr></code> est en
    anglais, nommer ses tables en français est un curieux mélange des genres, nécessitant
    de switcher de français à anglais en permanence.</li>
</ul>
<p>Utilisation de camelCase. En effet, cette syntaxe rend plus lisible les noms des
  tables en marquant les différents mots qui composent le nom d'une table apportant
  une visibilité qui n'est pas de trop pour les requêtes les plus complexes. De plus
  cette syntaxe est assez naturelle à tout programmeur initié à la <abbr>itle=Programmation Orientée Objet]POO</abbr>.</p>
<p>Cela découle de l'utilisation du camelCase, mais je le précise tout de même : pas
  de tirets ou autres signes superflux. On reste sur des caractères de a à z. Cette
  règle souffre une seule exception comme vous le constaterez ci-après.</p>
<p>Ces deux règles suffisent à savoir comment nommer une base de donnée, pour les tables,
  c'est un peu plus complexe.</p>
<h3>Nomenclature des tables</h3>
<p>Je nomme toutes les tables au pluriel selon un postulat simple : les tables sont
  une liste de lignes. C'est aussi une façon de bien distinguer une table d'une table
  liée. Par exemple, grâce à l'utilisation du pluriel, on ne peut pas confondre la
  table <span>products</span> avec la table <span>productCategories</span> ou le
  champ <span>billRows.product</span>.</p>
<p>Seules les tables de jointures peuvent contenir (elles le doivent) des tirets. Plus
  précisément l'underscore (tiret sous le 8 sur votre clavier). Une table qui associerai
  des utilisateurs à leurs produits préférés se nommerai <code>products_users</code>.</p>
<p>C'est une convention personnelle mais qui peut avoir de l'importance : le nom de
  la table <code>products_users</code> doit être composée des deux tables qu'elle
  référence par ordre croissant. Cela permet de pouvoir prédire leur nom sans avoir
  besoin de consulter le schéma de la table.</p>
<h3>Nomenclature des champs</h3>
<p>Les champs sont le plus souvent au singulier lorsqu'il ne peuvent contenir qu'une
  valeur. Une exception cependant, les champs de type <code>SET</code> qui contiennent
  un sous ensemble du set de valeurs qu'il peuvent contenir.</p>
<p>Cela permet aussi de se poser une question sur le contenu de votre table. Si l'un
  des champs est au pluriels et n'est pas de type <code>SET</code>, il y a de fortes
  présomptions sur le fait que le schéma de votre table n'est pas optimal conceptuellement.</p>
<p>Bien entendu, un champs avec une clé étrangère référençant la table <code>products</code>  sera nommé <code>product</code> si que possible.</p>
<p>Enfin, l'identifiant unique quand il se résume à une seule valeur auto-incrémentée
  (90% des cas) sera nommé simplement <code>id</code>.</p>
<h3>Et au niveau des requêtes ?</h3>
<p>En revanche, pour mes requêtes, j'utilise les majuscules, distinguant ainsi les parties
  propres au language des noms des tables et champs. Voici une requête créée récemment
  pour l'export <abbr>itle=Comma Separated Values]CSV</abbr> d'un client:</p><pre>SELECT equipments.id AS Id, organizations.label AS Client, installations.label AS Aire, CONCAT_WS(' ', equipmentModels.model, equipments.precision) AS Jeu<br /> FROM equipments<br /> LEFT JOIN equipmentModels on equipments.model=equipmentModels.id<br /> LEFT JOIN installations ON equipments.installation=installations.id<br /> LEFT JOIN organizations ON installations.organization=organizations.id<br /> WHERE equipmentModels.model LIKE '%sans réf%'</pre>
<p>Voilà pour mes petites règles de bonne conduite SQL ! Et vous, comment nommez-vous
  vos tables ? Que pensez-vous de ces principes ?</p>