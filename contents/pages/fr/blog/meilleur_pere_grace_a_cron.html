<!--VarStream
title=Comment devenir un meilleur père grâce à Cron
description=Décrocher de l'écran en plein milieu d'une session de code est difficile. Mais arriver en retard à la garderie, c'est pas cool. Heureusement cron et Patrick Sébastien sont là !
shortTitle=Meilleur père avec Cron
shortDesc=En savoir plus sur cette petite bidouille
published=2012-05-12T10:24:25.000Z
lang=fr
location=FR
keywords.+=JavaScript
categories.+=.*
-->

<h2>Décrocher de l'écran en plein milieu d'une session de code est difficile. Mais arriver en retard à la garderie, c'est pas cool. Heureusement cron et Patrick Sébastien sont là !</h2>
<p>Décrocher de l'écran en plein milieu d'une session de code est difficile. Mais arriver
  en retard à la garderie, c'est pas cool. Heureusement cron et Patrick Sébastien
  sont là !</p>

<p>Ma femme le sait bien, c'est difficile de communiquer avec moi quand je code. Le
  problème, c'est que je dois conduire mes deux petites filles à la garderie et surtout
  aller les chercher.</p>
<p>Après plusieurs remontrances suites à quelques retards, j'ai décidé de devenir un
  meilleur père en tirant avantage de ma machine de développement. Tout d'abord,
  j'ai cherché un moyen de faire sonner mon PC sous Debian GNU/Linux en ligne de
  commande.</p>
<p>La commande echo couplée à quelques options permet d'émettre un bip, mais cela ne
  marche pas toujours. Les bips peuvent être désactivés et il y a tout un tas de
  conditions obscures pour que ça fonctionne ou pas.</p><pre>root@server:~# echo -en "a" > /dev/tty5</pre>
<p>Bref, j'ai opté pour la solution "beep" qui est un petit binaire permettant de créer
  de véritables compositions de bips. La première chose à faire est donc de l'installer.</p><pre>root@server:~# aptitude install beep</pre>
<p>Enfin, j'ai trouvé <a title="Voir le forum href=http://forum.ubuntu-fr.org/viewtopic.php?id=47239">sur ce forum</a>,
  une ligne de commande toute prête qui joue l'air du petit bonhomme en mousse (on
  fait avec ce qu'on a :D).</p><pre>root@server:~# beep -f 1150 -n -f 1450 -n -f 1300 -l 300 -n -f 1150 -l 300 -n -f 1100 -l 300 -n -f 1150 -l 300 -n -f 850 -l 300</pre>
<p>Il ne reste plus qu'à éditer le fichier /etc/crontab pour lui ajouter quelques règles
  permettant de déclencher notre petit air de rassemblement pour un gros calin famille
  comme dirait mon aînée. La garderie est ouverte le matin de 9h à 12h du lundi au
  vendredi et l'après midi de 13h45 à 17h00 les lundi, mardi et vendredi. Je vous
  laisse deviner le sens des règles ci-dessous.</p><pre>root@server:~# echo "<br /># Garderie ZAZA & EMMA<br />45 8 * * 1-5 root beep -f 1150 -n -f 1450 -n -f 1300 -l 300 -n -f 1150 -l 300 -n -f 1100 -l 300 -n -f 1150 -l 300 -n -f 850 -l 300<br />45 11 * * 1-5 root beep -f 1150 -n -f 1450 -n -f 1300 -l 300 -n -f 1150 -l 300 -n -f 1100 -l 300 -n -f 1150 -l 300 -n -f 850 -l 300<br />35 13 * * 1,2,5 root beep -f 1150 -n -f 1450 -n -f 1300 -l 300 -n -f 1150 -l 300 -n -f 1100 -l 300 -n -f 1150 -l 300 -n -f 850 -l 300<br />45 16 * * 1,2,5 root beep -f 1150 -n -f 1450 -n -f 1300 -l 300 -n -f 1150 -l 300 -n -f 1100 -l 300 -n -f 1150 -l 300 -n -f 850 -l 300<br />#" >> /etc/crontab</pre>
<p>On redémarre le démon crond :</p><pre>root@server:~# /etc/init.d/cron restart</pre>
<p>Et voilà, plus de soucis à se faire pour la garderie, à condition de ne pas être
  en rendez-vous clientèle !</p>